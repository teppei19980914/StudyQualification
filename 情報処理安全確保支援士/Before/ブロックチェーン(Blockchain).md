# ブロックチェーン(Blockchain)

## はじめに

2025年10月のプロジェクトマネージャ試験受験を終え、2026年春の情報処理安全確保支援士に向けて勉強中です。  
本記事を含めた各知識のインデックスや学習の道のりについては、「[情報処理安全確保支援士への道のり(随時更新中)](https://qiita.com/teppei19980914/items/6411cb70f2937cbefdcc)」をご参照ください。  
**本記事は学習した内容を記載しています。**  

## 該当問題

[情報処理安全確保支援士令和2年秋期 午前Ⅱ 問5](https://www.sc-siken.com/kakomon/02_aki/am2_5.html)  

## ブロックチェーンとは(定義)

### 定義(エビデンス)

- Satoshi Nakamoto, *Bitcoin: A Peer-to-Peer Electronic Cash System*  
- NIST IR 8202  
- IPA「ブロックチェーン技術概要」

**ブロックチェーンとは、取引データをまとめたブロックを時系列に連結し、それを分散管理することで、改ざん耐性と可用性を実現する分散型台帳技術です。**

## ブロックチェーンの基本構造

### ブロックの構成要素

1つのブロックは主に次の情報で構成されます。

| 要素 | 内容 |
|---|---|
| 取引データ | トランザクションの集合 |
| 前ブロックのハッシュ値 | 直前ブロックとの連結 |
| タイムスタンプ | 作成時刻 |
| ナンス(Nonce) | 合意形成で使用 |
| 自身のハッシュ値 | ブロック全体の要約 |

→ **「前ブロックのハッシュ値」を含むことが最大の特徴**

### チェーン構造の意味

```
Block(n-1) ──hash──▶ Block(n) ──hash──▶ Block(n+1)
```

- 過去のブロックを改ざんすると、
- 以降すべてのハッシュが不整合になる

→ **連鎖構造による改ざん検知/抑止**

## 改ざんが困難な理由

### ハッシュ関数による完全性保証

- ハッシュ関数の性質(SHA-256 等)
  - 一方向性
  - 衝突困難性
  - 微小変更で出力が激変

→ 取引データを1ビット変更すると、ブロック全体のハッシュが変わります。

### 分散管理(P2Pネットワーク)

- 台帳は **複数ノードで共有**
- 中央サーバなし
- 多数決(合意形成)で正当なチェーンを決定

→ 一部ノードの改ざんは無効化されます。  

### 合意形成アルゴリズム(Consensus)

代表例：

| 方式 | 特徴 |
|---|---|
| PoW(Proof of Work) | 計算量による正当性 |
| PoS(Proof of Stake) | 保有量に応じた権利 |
| PBFT | 実用向け高速合意 |

→ 攻撃者が改ざんするには**膨大な計算資源または支配力が必要**

## ブロックチェーンのセキュリティ特性

### 提供される性質(CIA 観点)

| 観点 | 実現方法 |
|---|---|
| 完全性(Integrity) | ハッシュ連鎖 |
| 可用性(Availability) | 分散管理 |
| 認証/否認防止 | 電子署名 |

**※ 機密性(Confidentiality)は標準では弱い**  
    **→ 必要に応じて暗号化/許可型設計を採用**  

## 電子署名との関係

- 各取引は **送信者の秘密鍵で署名**
- 公開鍵で検証可能
- なりすまし防止/否認防止を実現

→ ブロックチェーン ＝ **ハッシュ＋電子署名＋分散合意**

## パブリック型とプライベート型

| 種別 | 特徴 | 例 |
|---|---|---|
| パブリック | 誰でも参加可 | Bitcoin, Ethereum |
| プライベート | 管理者あり | 企業内台帳 |
| コンソーシアム | 限定参加 | 金融業界 |

## 周辺知識①：51%攻撃

### 概要

- 計算能力(またはステーク)の過半数を支配
- 不正チェーンを正当と認識させる攻撃

→ 分散度が低いほどリスク増大

## 周辺知識②：スマートコントラクト

- ブロックチェーン上で自動実行される契約
- 例：Ethereum

### リスク
- バグがあると修正困難
- DAO事件(2016)

## 周辺知識③：ブロックチェーンとデータベースの違い

| 観点 | ブロックチェーン | RDB |
|---|---|---|
| 改ざん耐性 | 高い | 低い |
| 性能 | 低め | 高速 |
| 管理者 | 不要/分散 | 必要 |
| 更新 | 追記のみ | 更新可 |
