# 関係データベースの外部キー

## はじめに

2025年10月のプロジェクトマネージャ試験受験を終え、2026年春の情報処理安全確保支援士に向けて勉強中です。  
本記事を含めた各知識のインデックスや学習の道のりについては、「[情報処理安全確保支援士への道のり(随時更新中)](https://qiita.com/teppei19980914/items/6411cb70f2937cbefdcc)」をご参照ください。  
**本記事は学習した内容を記載しています。**  

## 該当問題

[情報セキュリティスペシャリスト平成26年春期 午前Ⅱ 問21](https://www.sc-siken.com/kakomon/26_haru/am2_21.html)  

## 関係モデル

データを行(タプル)と列(属性)からなる関係(Relation)で表現するデータモデルで、現在のRDB(Relational Database)の基礎となっています。  

## 外部キー(Foreign Key)

他の票の主キー(または候補キー)を参照する属性の組み合わせで、参照整合性を保証するための制約です。  

### 参照整合性の保持

* 参照元には参照先に存在しない値を挿入できない  
* 参照先の行が削除されたら、参照元の整合性を保つための動作が必要  

### 外部キーの ON DELETE / ON UPDATE

参照先に対する更新や削除の際に、参照元に対するアクションを指定します。  

|動作|説明|
|:----|:----|
|RESTRICT / NO ACTION|参照元に参照があれば参照先は削除不可(デフォルト)|
|CASCADE|参照先を削除すると参照元も自動削除|
|SET NULL|参照先削除時に参照元の外部キーを NULL|
|SET DEFAULT|デフォルト値に設定|

## 正規化

データの重複や不整合を防ぐため、表を段階的に構造化する手法です。  

### 正規化の段階

#### 第1正規形

第1正規形では、下記2点を実施します。  

* 繰り返し属性を排除  
* 分割不可能な単位となるように分割  

#### 第2正規系

第2正規形では、下記1点を実施します。  

* 部分関数従属を排除  

#### 第3正規系

第3正規形では、下記1点を実施します。  

* 推移的関数従属を排除  

## ACID特性

データベースのトランザクション処理が持つべき4つの性質のことです。  
4つの性質とは下記の通りです。  

|特性|意味|
|:----|:----|
|Atomicity(原子性)|全部成功 or 全部失敗|
|Consistency(一貫性)|制約を常に満たす|
|Isolation(独立性)|他トランザクションの影響を受けない|
|Durability(永続性)|コミット後は永続保存|

## ロックと分離レベル

### ロックの種類

ロックには下記2つがあります。  

* 共有ロック  
* 排他ロック  

### 分離レベル

* READ UNCOMMITTED  
* READ COMMITTED  
* REPEATABLE READ  
* SERIALIZABLE  
